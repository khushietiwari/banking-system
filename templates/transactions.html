{% extends 'customer/base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary-custom mb-0">Transaction History</h2>
    <button class="btn btn-outline-custom" onclick="window.print()">
        <i class="fas fa-download me-2"></i> Download Statement
    </button>
</div>

<div class="card-custom">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-custom table-hover">
                <thead>
                    <tr>
                        <th>Date & Time</th>
                        <th>Reference ID</th>
                        <th>Description</th>
                        <th>Type</th>
                        <th class="text-end">Amount</th>
                        <th class="text-center">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for txn in transactions %}
                    <tr>
                        <td class="text-nowrap">{{ txn.created_at|date:"M d, Y H:i" }}</td>
                        <td class="font-monospace text-muted small">{{ txn.reference_id|default:"-" }}</td>
                        <td>
                            <div class="fw-bold">{{ txn.transaction_type }}</div>
                            <small class="text-muted">{{ txn.method }}</small>
                        </td>
                        <td>
                            {% if txn.transaction_type == 'Deposit' or txn.transaction_type == 'Transfer Received' %}
                            <span class="badge bg-success bg-opacity-10 text-success">Credit</span>
                            {% else %}
                            <span class="badge bg-danger bg-opacity-10 text-danger">Debit</span>
                            {% endif %}
                        </td>
                        <td
                            class="text-end fw-bold {% if txn.transaction_type == 'Deposit' or txn.transaction_type == 'Transfer Received' %}text-success{% else %}text-danger{% endif %}">
                            {% if txn.transaction_type == 'Deposit' or txn.transaction_type == 'Transfer Received' %}+{%
                            else %}-{% endif %}â‚¹{{ txn.amount|floatformat:2 }}
                        </td>
                        <td class="text-center">
                            {% if txn.status == 'Approved' %}
                            <i class="fas fa-check-circle text-success" title="Approved"></i>
                            {% elif txn.status == 'Pending' %}
                            <i class="fas fa-clock text-warning" title="Pending"></i>
                            {% else %}
                            <i class="fas fa-times-circle text-danger" title="Rejected"></i>
                            {% endif %}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-center py-5">
                            <img src="https://cdni.iconscout.com/illustration/premium/thumb/empty-state-2130362-1800926.png"
                                alt="No transactions" style="height: 150px; opacity: 0.5;">
                            <p class="text-muted mt-3">No transactions found within this period.</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="card-footer bg-white border-top-0 d-flex justify-content-end p-3">
        <nav aria-label="Page navigation">
            <ul class="pagination pagination-sm mb-0">
                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
            </ul>
        </nav>
    </div>
</div>
{% endblock %}