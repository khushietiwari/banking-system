{% extends 'base.html' %}
{% block content %}

<div class="dashboard-container">

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
    <h3 class="brand">PrimeTrust</h3>

    <a href="{% url 'customer_dashboard' %}">ğŸ  Dashboard</a>
    <a href="{% url 'transaction_history' %}">ğŸ“œ Statements</a>
    <a href="{% url 'transfer' %}">ğŸ” Transfer Funds</a>
    <a href="{% url 'pay_bills' %}">ğŸ§¾ Pay Bills</a>
    <a href="{% url 'manage_profile' %}">âš™ Manage Profile</a>
    <a href="{% url 'deposit' %}">â• Deposit</a>
    <a href="{% url 'withdraw' %}">â– Withdraw</a>

    <!-- Styled Logout -->
    <form method="POST" action="{% url 'logout' %}" class="mt-4">
        {% csrf_token %}
        <button type="submit" class="sidebar-link logout-link">
            ğŸšª Logout
        </button>
    </form>
</div>

    <!-- Main Content -->
    <div class="main-content">

        <!-- KYC Warning Banner -->
        {% if not kyc or kyc.status != "Approved" %}
        <div style="background:#ffe5e5;padding:12px;border-radius:6px;margin-bottom:20px;">
            âš  Please complete KYC verification to unlock full banking features.
        </div>
        {% endif %}

        <!-- Greeting Bar -->
        <div class="top-bar">
            <div>
                <h2>Welcome Back, {{ name }} ğŸ‘‹</h2>
                <small class="text-muted">Here's your account overview</small>
            </div>

            <div class="profile-circle">
                {{ name|first|upper }}
            </div>
        </div>

        <!-- Balance Card -->
        <div class="balance-card">
            <div>
                <p class="balance-label">Available Balance</p>
                <h1>â‚¹ {{ balance }}</h1>

                <div class="account-details">
                    <small>Account No: {{ account_number }}</small>
                    <small>IFSC Code: {{ ifsc }}</small>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="section-title">
            <h4>Quick Actions</h4>
        </div>

        <div class="action-grid">

            <a href="{% url 'view_balance' %}">
                <div class="action-box blue">
                    ğŸ’°
                    <h5>View Balance</h5>
                </div>
            </a>
            <a href="{% url 'deposit' %}">
    <div class="action-box green">
        â•
        <h5>Deposit</h5>
    </div>
</a>

<a href="{% url 'withdraw' %}">
    <div class="action-box red">
        â–
        <h5>Withdraw</h5>
    </div>
</a>

            <a href="{% url 'transaction_history' %}">
                <div class="action-box purple">
                    ğŸ“œ
                    <h5>Statements</h5>
                </div>
            </a>

            <a href="{% url 'transfer' %}">
                <div class="action-box green">
                    ğŸ”
                    <h5>Transfer Funds</h5>
                </div>
            </a>

            <a href="{% url 'pay_bills' %}">
                <div class="action-box yellow">
                    ğŸ§¾
                    <h5>Pay Bills</h5>
                </div>
            </a>

            <a href="{% url 'manage_profile' %}">
                <div class="action-box blue">
                    âš™
                    <h5>Manage Profile</h5>
                </div>
            </a>

        </div>

        <!-- KYC Section -->
        <div class="section-title">
            <h4>KYC Verification</h4>
        </div>

        <div class="action-grid">

            {% if not kyc %}
                <a href="{% url 'upload_kyc' %}">
                    <div class="action-box yellow">
                        ğŸªª
                        <h5>Upload KYC</h5>
                    </div>
                </a>

            {% elif kyc.status == "Pending" %}
                <div class="action-box purple">
                    â³
                    <h5>KYC Pending</h5>
                </div>

            {% elif kyc.status == "Rejected" %}
                <a href="{% url 'upload_kyc' %}">
                    <div class="action-box red">
                        âŒ
                        <h5>KYC Rejected - Reupload</h5>
                    </div>
                </a>

            {% elif kyc.status == "Approved" %}
                <div class="action-box green">
                    âœ…
                    <h5>KYC Approved</h5>
                </div>
            {% endif %}

        </div>

        <!-- Loan Section -->
        <div class="section-title">
            <h4>Loans</h4>
        </div>

        <div class="action-grid">

            <a href="{% url 'apply_loan' %}">
                <div class="action-box blue">
                    ğŸ’³
                    <h5>Apply Loan</h5>
                </div>
            </a>

            <a href="{% url 'my_loans' %}">
                <div class="action-box purple">
                    ğŸ“‹
                    <h5>My Loans</h5>
                </div>
            </a>

        </div>

        <!-- Recent Activity -->
        <div class="recent-section">
            <h4>Recent Transactions</h4>

            <div class="recent-card">
                <p>No recent transactions yet.</p>
                <small class="text-muted">
                    Your latest transactions will appear here.
                </small>
            </div>
        </div>

    </div>

</div>
<script>
function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");

    if (sidebar.style.display === "none") {
        sidebar.style.display = "flex";
    } else {
        sidebar.style.display = "none";
    }
}
</script>

{% endblock %}
